@import "globals";
@import "colors";
@import "normalize";
@import "ui";
@import "main";
@import "mediaqueries";
@import "utilities";
@import "print";

// Grid calculations
@gridTotal: 960px;
@gridMargin: 20px;
@gridDivisions: 12;

@gridUnit: ( @gridTotal - @gridMargin * ( @gridDivisions - 1 ) ) / @gridDivisions;
.grid( @property, @units ) {
  @_value: @gridUnit * @units + @gridMargin * ( @units - 1 );
  ignore: ~`"''; @{property}: @{_value};"`;
}

// Main Sections
@headerHeight: 1;
@editorWidth: 4;
@trayHeight: 3;
@collapsed: 0.8;
@controlsHeight: 0.8; // same a collapsed

// Logo
@logoWidth: 52px;

// Video
@videoWidth: 700px;
@videoHeight: @videoWidth * .56125;

//Controls


// Utility
@maxZ: 10000;

// Colors
@baseDark: #242F33;
@baseLight: #EFEFEF;
@textShadow: 0 -2px 0 #000;
@rouge: #CB2408;


/*********************************************************
* Base
*/

html {
  background: @noise #121212;
}

.butter-wrapper {
  position: absolute;
  .grid( top, @headerHeight );
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
}

section {
  .box-sizing( border-box );
  .transition( all .3s ease );
}

/*********************************************************
* Buttons
*/

@buttonTopSpacing: 15px;

.button() {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 2px;
  text-decoration: none;
  font-size: 13px;
}

.btn-shadow( @color ) {
  box-shadow: inset 0 1px 0 lighten( @color, 10% ),
  0 -1px 0 darken( @color, 20% ),
  0 1px 0 darken( @color, 10% ),
  1px 0 0 darken( @color, 5% ),
  -1px 0 0 darken( @color, 5% );
}

.btn-shadow( @color, "hover" ) {
  box-shadow: inset 0 1px 0 lighten( @color, 15% ),
    0 -1px 0 darken( @color, 20% ),
    0 1px 0 darken( @color, 14% ),
    1px 0 0 darken( @color, 5% ),
    -1px 0 0 darken( @color, 5% ),
    0 2px 2px rgba( 0, 0, 0, 0.5 );
}

[class^="butter-btn-"] {
  .button();
  &:hover {
    cursor: pointer;
  }
  > .icon {
    position: relative;
    top: 2px;
    margin-right: 5px;
  }
}

[class^="butter-btn-"] + [class^="butter-btn-"] {
  margin-left: 3px;
}

.butter-btn-dark {
  color: #EEE;
  //border-top: 1px solid #000;
  text-shadow: @textShadow;
  .btn-shadow( @baseDark );
  .gradient( "vertical", lighten( @baseDark, 3% ), darken( @baseDark, 2% ) );
  &:hover {
    color: #FFF;
    .btn-shadow( @baseDark, "hover" );
  }
}

.butter-btn-red {
  color: #EEE;
  text-shadow:0 -1px 0 darken( @rouge, 20% );
  .btn-shadow( @rouge );
  .gradient( "vertical", @rouge, darken( @rouge, 6% ) ); 
  &:hover {
    color: #FFF;
    .btn-shadow( @rouge, "hover" );
  }
}

.btn-light,
.ui-light a {
  .button2( #EEE, 10%, #333, 3px, 10% );
  font-size: 14px;
  padding: 5px 10px;
}



/*********************************************************
* Header
*/

header {
  position: relative;
  .grid( height, @headerHeight );
  .gradient( "vertical", @baseDark, darken( @baseDark, 5% ) );
  z-index: @maxZ;
  border: 1px solid #111;
  border-width: 1px 0 1px 0;
  box-shadow: 0 1px 0 fade( lighten( @baseDark, 10% ), 25%);
}

#logo {
  padding-left: @logoWidth;
  font-size: 16px;
  font-weight: 300;
  margin-left: @gridMargin;
  color: @baseLight;
  text-shadow: 0 -1px 1px #000;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  .grid( height, @headerHeight );
  .grid( line-height, @headerHeight );
  background: url( ../img/logo_styled.png ) no-repeat;
  float: left;
}

#butter-header-buttons {
  padding-top: @buttonTopSpacing;
  margin-right: @gridMargin;
  float: right;
}

/*********************************************************
* Editor
*/

@inputOutline: #CCC;
@inputFocus: @rouge;
@inputText: #555;

@inputTextSize: 13px;
@inputPadding: 5px;

.butter-editor {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  .grid( width, @editorWidth );
  .gradient( "vertical", @baseLight, darken( @baseLight, 5% ) );
  box-shadow:  -7px 5px 5px -5px fade( #000, 60% ),
    inset 0 7px 2px -3px fade( #000, 40% );
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: 100;
}
.butter-editor-close-btn {
   > i {
    background-position: -456px -72px;
  }
}
.butter-editor-outer {
  .box-sizing( border-box );
  .grid( width, @editorWidth );
  padding-right: 20px; /* scrollbar */
}

.butter-editor-inner {
  padding: 20px;

  h3{
    margin-top: 0;
    text-transform: uppercase;
    font-size: .9em;
    letter-spacing: 0.08em;
    color: #444;
    text-shadow: 0 1px 0 #FFF;
  }

  label {
    font-size: 13px;
    display: block;
    padding: @inputPadding 0;
  }

  fieldset {
    margin-bottom: 13px;
  }

  input,
  textarea {
    border: 1px solid @inputOutline;
    border-top-color: darken( @inputOutline, 10% );
    border-radius: 2px;
    color: @inputText;
    padding: @inputPadding;
    font-size: @inputTextSize;
    box-sizing: border-box;
    width: 100%;

    &:focus {
      outline: none;
      border: 1px solid fade( @inputFocus, 50% );
      box-shadow: 0 0 4px fade( @inputFocus, 50% );
    }
  }

  textarea {
    min-height: 100px;
    line-height: 1.25;
  }

}

/*********************************************************
* Stage
*/

.butter-stage {
  position: absolute;
  top: 0;
  left: 0;
  right: @editorWidth;
  .grid( right, @editorWidth );
  .grid( bottom, @trayHeight );
  .gradient( "wash", darken( @baseDark, 5% ), darken( @baseDark, 10% ), lighten( @baseDark, 5% ), @noiseLight );
}

.butter-embed-container {
  width: @videoWidth;
  height: @videoHeight;
  margin: 0 auto;
  margin-top: 20px;
}

.butter-media-source {
  padding: 10px 0;
}

.butter-video-container {
  width: 100%;
  height: 100%;
  box-shadow: inset 0 0 0 1px darken( @baseDark, 15% ),
    0 1px 0 0 lighten( @baseDark, 3% );
  .box-sizing( border-box );
  background: darken( @baseDark, 10% );
  video,
  iframe {
    width: 100%;
    height: 100%;
  }
}


/*********************************************************
* Tray
*/

.butter-tray {
  position: absolute;
  bottom: 0;
  left: 0;
  .grid( right, @editorWidth );
  .grid( height, @trayHeight );
  background: darken( @baseDark, 5% );
  //.gradient( "vertical", @baseLight, darken( @baseLight, 10% ) );
}

.butter-controls {
  position: relative;
  border: 1px solid #111;
  box-shadow: inset 0 1px 0 lighten( @baseDark, 5% ),
    0 2px 5px 2px rgba( 0, 0, 0, 0.5 );
  border-width: 1px 0 1px 0;
  .gradient( "vertical", @baseDark, darken( @baseDark, 2% ) );
  .grid( height, @controlsHeight );
  .box-sizing( border-box );
  padding: 5px;
}

.butter-btn-media {
  float: left;
  margin-right: 5px;
}

.butter-controls-inner {
  position: relative;
  display: block;
  margin-left: 110px;
  background: rgba( 0, 0, 0, .5 );
  height: 100%;
  border-radius: 5px;
  border-bottom: 1px solid lighten( @baseDark, 5% );
}

.butter-scrubber {
  position: absolute;
  cursor: move;
  left: 30px;
  top: -5px;
  padding-bottom: 2px;
  width: 1px;
  .grid( height, @controlsHeight );
  background: @rouge;
  z-index: 100;
}

.butter-scrubber-head {
  @_scrubberHeadSize: 7px;
  position: absolute;
  top: -@_scrubberHeadSize;
  left: -@_scrubberHeadSize / 2;
  width: @_scrubberHeadSize;
  height: @_scrubberHeadSize;
  border-radius: @_scrubberHeadSize;
  background: @rouge;
}

.butter-range {
  position: absolute;
  padding-bottom: 2px;
  top: 0;
  bottom: 0;
  width: 100px;
  .gradient( "vertical", fade( #FFF, 2% ), fade( #FFF, 5% ));
  //border: 1px solid fade( @rouge, 50% );
  border-radius: 5px;

  @_handles: 10px;

  .ui-resizable-handle {
    background: @baseLight;
    display: block;
    position: absolute;
    top: 50%;
    height: @_handles;
    width: @_handles / 2;
    margin-top: -@_handles / 2;
    border-radius: 2px;
    cursor: pointer;
  }
  .ui-resizable-w {
    left: -@_handles / 4;
  }
  .ui-resizable-e {
    right: -@_handles / 4;
  }

}


/*********************************************************
* Collapsed states
*/

.butter-editor-collapsed {
  .butter-editor {
    width: 0;
  }
  .butter-tray {
    right: 0;
  }
  .butter-stage {
    right: 0;
  }
  .butter-editor-close-btn > i {
    background-position: -432px -72px; // left
  }
}

.butter-tray-collapsed {
  .butter-tray{
    .grid( height, @collapsed );
  }
  .butter-stage {
    .grid( bottom, @collapsed );
  }
}
