<!doctype html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Tests for cichlid</title>

  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/ui-test.css">

  <!--
  This is for client-side compiled version of LESS.
  See http://lesscss.org/ to learn more about LESS.

  It should not be used in production or if you are
  compiling LESS yourself.

  Consider using http://livereload.com/

  <link rel="stylesheet/less" href="css/test.less">
  <script src="js/libs/less-1.3.0.min.js"></script>

  -->

  <script type="text/javascript" src="http://use.typekit.com/qnf5iux.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

</head>
<body>
  <div id="wrapper" class="butter-wrapper">
       <!--

    <header class="butter-header">
      <div id="logo">Popcorn</div>
       <div id="butter-header-buttons-left">
  
        <a class="butter-btn-dark"><i class="icon icon-white icon-user"></i> Logged in as Kate Hudson</a>
    
        <a class="butter-btn-dark">Save</a>
      </div> 
      <div id="butter-header-buttons-right">
  
        <a id="butter-editor-close-btn" class="butter-btn-dark butter-editor-close-btn"><i class="icon icon-only icon-white icon-chevron"></i></a>
      </div> 
    </header>
  -->

    <section id="stage" class="butter-stage">
      <div class="butter-embed-container">
  
        <div id="media-source" class="butter-media-source">
           <a class="butter-btn-dark"><i class="icon icon-white icon-plus"></i> Add Video Source</a>
        </div>
    
        <div class="butter-video-container">
          <video id="video" preload data-butter="media" controls>
            <source src="http://ia700300.us.archive.org/9/items/nozon-test1/Nozon-test_512kb.mp4">
            <source src="http://ia700300.us.archive.org/9/items/nozon-test1/Nozon-test.ogv">
          </video>
        </div>
      </div>
    </section>
    <section id="editor" class="butter-editor">
       <header class="butter-editor-header">
          <ul>
            <li class="butter-editor-title"><a class="butter-btn-dark">Add Event</a></li>
            <li><a class="butter-btn-dark"><i class="icon icon-white icon-cog"></i></a></li>
            <li><a class="butter-btn-dark"><i class="icon icon-white icon-share"></i>Share</a></li>
            <!--<li><a class="butter-btn-dark"><i class="icon icon-white icon-pencil"></i>Edit</a></li>-->
            <li><a class="butter-btn-dark butter-active"><i class="icon icon-only icon-white icon-plus"></i></a></li>
          </ul>
        </header>
       
        <div class="butter-editor-outer">
          <div class="butter-editor-inner">  
            <fieldset class="btn-events-list">
                <a class="btn-light btn-events">Text</a>
                <a class="btn-light btn-events">Link</a>
                <a class="btn-light btn-events">Twitter</a>
                <a class="btn-light btn-events">Blah</a>
                <a class="btn-light btn-events">Stuff</a>
            </fieldset>          
            <fieldset>
              <div class="ui-button-group ui-light">
                <a>This is a dropdown</a>
                <select name="stledas" id="myselect1">
                  <option val="jeldo">dasd</option>
                  <option val="dasda">d32fff</option>
                </select>
              </div>
            </fieldset>
            
          </div>
        </div>
    </section>
    <!--
    <section id="tray" class="butter-tray">
      <div class="butter-controls">
        <a class="butter-btn-dark"><i class="icon icon-white icon-plus"></i> Add Video Source</a>
      </div>
      <div id="controls" class="butter-visuals<a class="butter-btn-dark"><i class="icon icon icon-pencil"></i> Edit media</a>add">
        <div id="butter-controls-inner" class="butter-controls-inner">
          <ul id="butter-visualization"></ul>
          <span id="butter-range" class="butter-range"></span>
          <span id="butter-scrubber" class="butter-scrubber">
            <span class="butter-scrubber-head"></span>
          </span>
          
        </div>
      </div>
    </section>
  -->

   <section id="tray" class="butter-tray">
    <div class="butter-tray-sidebar">
      <div class="butter-tray-sidebar-controls">
         <a class="butter-btn-dark"><i class="icon icon-white icon-only icon-play"></i></a>
      </div>
      <div class="butter-tray-layers"></div>
    </div>
    <div id="butter-tracks-container" class="butter-tracks-container">
        <div id="butter-tracks" class="butter-tracks">
          <div id="controls" class="butter-controls">
            <div class="butter-controls-inner"></div>
          </div>
        </div>
    </div>
    <span id="butter-scrubber-large" class="butter-scrubber-large">
        <span class="butter-scrubber-head"></span>
    </span>
    <div id="butter-visuals" class="butter-visuals">
      <div id="butter-controls-inner" class="butter-visuals-inner">
        <ul id="butter-visualization"></ul>
        <span id="butter-range" class="butter-range">  
        </span>
        <span id="butter-scrubber" class="butter-scrubber">
        </span> 
      </div>
    </div>
  </section>


  </div>
<!--
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
-->
  <script src="js/libs/jquery.js"></script>
  <script src="js/libs/jquery.ui.js"></script>
  <script src="js/libs/jquery.localScroll.min.js"></script>
  <script src="js/script.js"></script>
  <script>
  document.addEventListener( "DOMContentLoaded", function(){

    var butter = {},
        i,
        l;

    butter.duration = 80;
    butter.tracks = [ 1, 2, 3 ];
    butter.orderedTrackEvents = [
      {
        track: 1,
        start: 3,
        end: 5
      },
      {
        track: 2,
        start: 10,
        end: 15
      },
      {
        track: 2,
        start: 24,
        end: 30
      },
      {
        track: 3,
        start: 24,
        end: 35
      },
      {
        track: 1,
        start: 67,
        end: 75
      }
    ];

    function addVisualizationEl( obj) {
      var dur = butter.duration,
          el,
          trackEl,
          ul = document.getElementById( "butter-visualization" ),
          tracks = document.getElementById( "butter-tracks" ),
          start = obj.start,
          end = obj.end,
          track = obj.track,
          totalTracks = butter.tracks.length;

      el = document.createElement( "li" );
      el.style.left = start / dur * 100 + "%";
      el.style.right = ( dur - end ) / dur * 100 + "%";
      el.style.top = track / totalTracks * 100 + "%";

      trackEl = el.cloneNode( "true" );

      ul.appendChild( el );
      tracks.appendChild( trackEl );

    }

    /*
    document.getElementById( "butter-editor-close-btn" ).addEventListener( "click", function(){
      document.body.classList.toggle( "butter-editor-collapsed" );
    }); */

    for ( i = 0, l = butter.orderedTrackEvents.length; i < l; i++ ) {
      addVisualizationEl( butter.orderedTrackEvents[ i ] );
    }

    var tracks = document.getElementById( "butter-tracks" ),
        tracksView = document.getElementById( "butter-tracks-container" ),
        viz = document.getElementById( "butter-visualization" ),
        vizWidth = viz.getBoundingClientRect().width,
        vizView = document.getElementById( "butter-range" ),
        scrubber = document.getElementById( "butter-scrubber-large" ),
        scrubberViz = document.getElementById( "butter-scrubber" );


    function trayToViewer( val ) {
      var tray = $( "#butter-tracks" ).width(),
          viewer = $( "#butter-controls-inner" ).width(),
          ratio = viewer / tray;

      return val * ratio;
    }

    function updateScrubbers() {
      var small = document.getElementById( "butter-scrubber" ),
          large = document.getElementById( "butter-scrubber-large" );

      small.style.left = large.style.left;

    }

    function resetView() {
      var vizViewWidth = vizView.getBoundingClientRect().width,
          vizViewLeft = vizView.style.left.replace( "px", "" ),
          tracksViewWidth = tracksView.getBoundingClientRect().width,
          newTracksWidth = tracksViewWidth * vizWidth / vizViewWidth,
          newLeft = vizViewLeft / vizWidth  * newTracksWidth;

          tracks.style.width = newTracksWidth + "px",
          $( tracksView ).scrollTo( newLeft, 0 );
    }

    $( ".butter-scrubber-large" ).draggable({ 
      axis: "x",
      containment: "#butter-controls-inner",
      drag: function( event, ui ) {
        var newScrubberPos = trayToViewer( ui.position.left );
        document.getElementById( "butter-scrubber" ).style.left = newScrubberPos + "px";

      },
      stop: function( event, ui ) {
        var total = $( "#butter-controls-inner" ).width(),
            endPos = ui.position.left,
            leftInPercent =  endPos/ total * 100 + "%";

        this.style.left = leftInPercent;
        document.getElementById( "butter-scrubber-large" ).style.left = leftInPercent;

      }
    });

    $( ".butter-range" ).draggable(
      { axis: "x",
      containment: "#butter-controls-inner",
      drag: function( event, ui ) {
        resetView( this );
      }
    }).resizable({ 
      handles: "e, w", 
      containment: "#butter-controls-inner",
      resize: function( event, ui ) {
        resetView( this );
      }
    });

  }, false);

  </script>
</body>
</html>
